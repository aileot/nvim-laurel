name: Docs
on:
  push:
    branches:
      - main
    paths:
      - '**.md'
jobs:
  vimdoc:
    runs-on: ubuntu-22.04
    if: ${{ github.ref == 'refs/heads/main' }}
    steps:
      - uses: actions/checkout@v3
      - name: Generate vimdoc
        uses: kdheepak/panvimdoc@main
        with:
          vimdoc: laurel
          pandoc: doc/laurel.md
          version: "Neovim >= 0.8.0"
          demojify: true
          treesitter: true
      - name: PR new vimdoc
        uses: peter-evans/create-pull-request@v4
        with:
          branch: create-pull-request--branches--main--vimdoc
          title: "docs(vimdoc): auto-generate"
          body: |
            :robot: Update vimdoc
            ---
            This PR was generated with [create-pull-request](https://github.com/peter-evans/create-pull-request).
          commit-message: "docs(vimdoc): auto-generate"
          committer: "github-actions[bot] <github-actions[bot]@users.noreply.github.com>"
          author: "${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>"
          delete-branch: true
